# SQL Server with Windows AD Authentication Template
# Copy this file to .env and update with your settings

# Environment selection (compatible with previous version)
OMOP_ENV=SQLSERVER

# SQL Server Connection Settings
SQL_SERVER=your-server.domain.com
SQL_DATABASE=OMOP_CDM
SQL_PORT=1433

# Windows Authentication Options:
# ================================
# Option 1: True integrated security (Windows only, no credentials needed)
USE_WINDOWS_AUTH=true
# Leave SQL_USER and SQL_PASSWORD commented out

# Option 2: NTLM with domain credentials (cross-platform, works on Mac/Linux)
# USE_WINDOWS_AUTH=true
# SQL_USER=DOMAIN\username
# SQL_PASSWORD=your_domain_password

# Option 3: Windows AD with specific credentials
# USE_WINDOWS_AUTH=true
# SQL_WINDOWS_USER=DOMAIN\username
# SQL_WINDOWS_PASSWORD=your_password

# Option 4: Standard SQL authentication (not Windows AD)
# USE_WINDOWS_AUTH=false
# SQL_USER=sql_username
# SQL_PASSWORD=sql_password

# Database Schemas
# CDM Schema (where OMOP CDM tables are located)
SQL_CDM_SCHEMA=dbo
SQL_VOCABULARY_SCHEMA=dbo

# Results Schema (where output will be written)
SQL_RESULTS_SCHEMA=dbo

# Optional: If CDM and results are in different databases
# SQL_CDM_DATABASE=cdm_database
# SQL_RESULTS_DATABASE=results_database

# JDBC Driver Path
SQL_JDBC_PATH=./jdbc_drivers

# Output configuration
OUTPUT_FOLDER=output

# Query Timeout (optional, in seconds)
QUERY_TIMEOUT=3600

# Troubleshooting Windows Authentication:
# ========================================
# 1. On Windows with proper domain setup:
#    - Set USE_WINDOWS_AUTH=true
#    - Don't provide username/password
#    - Ensure sqljdbc_auth.dll is in system PATH or java.library.path
#
# 2. On Mac/Linux or when domain auth fails:
#    - Set USE_WINDOWS_AUTH=true
#    - Provide SQL_USER=DOMAIN\username
#    - Provide SQL_PASSWORD=your_password
#    - This uses NTLM authentication
#
# 3. For Azure SQL Database:
#    - Must use SQL authentication (USE_WINDOWS_AUTH=false)
#    - Azure AD authentication requires different connection string